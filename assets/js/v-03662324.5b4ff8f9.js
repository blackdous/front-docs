"use strict";(self.webpackChunkfrontdocs=self.webpackChunkfrontdocs||[]).push([[573],{8288:(l,e,t)=>{t.r(e),t.d(e,{data:()=>n});const n={key:"v-03662324",path:"/git/workflow.html",title:"Git版本管理规范",lang:"zh-CN",frontmatter:{},excerpt:"",headers:[{level:2,title:"分支",slug:"分支",children:[{level:3,title:"概览",slug:"概览",children:[]},{level:3,title:"说明",slug:"说明",children:[]}]},{level:2,title:"工作流",slug:"工作流",children:[{level:3,title:"需求开发",slug:"需求开发",children:[]},{level:3,title:"发布测试",slug:"发布测试",children:[]},{level:3,title:"生产发布",slug:"生产发布",children:[]},{level:3,title:"生产环境紧急Bug修复",slug:"生产环境紧急bug修复",children:[]}]},{level:2,title:"附：Git标签操作",slug:"附-git标签操作",children:[{level:3,title:"打标签并推送",slug:"打标签并推送",children:[]},{level:3,title:"查看所有tag信息",slug:"查看所有tag信息",children:[]},{level:3,title:"补打标签",slug:"补打标签",children:[]},{level:3,title:"打错标签",slug:"打错标签",children:[]},{level:3,title:"删除标签",slug:"删除标签",children:[]}]}],filePathRelative:"git/workflow.md",git:{updatedTime:162997515e4,contributors:[]}}},4822:(l,e,t)=>{t.r(e),t.d(e,{default:()=>Q});var n=t(6252),a=t(3080);const s=(0,n._)("h1",{id:"git版本管理规范",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#git版本管理规范","aria-hidden":"true"},"#"),(0,n.Uk)(" Git版本管理规范")],-1),i=(0,n._)("h2",{id:"分支",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#分支","aria-hidden":"true"},"#"),(0,n.Uk)(" 分支")],-1),r=(0,n._)("h3",{id:"概览",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#概览","aria-hidden":"true"},"#"),(0,n.Uk)(" 概览")],-1),u=(0,n._)("table",null,[(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{style:{"text-align":"left"}},"分支类型"),(0,n._)("th",{style:{"text-align":"left"}},"命名规则"),(0,n._)("th",{style:{"text-align":"left"}},"创建自"),(0,n._)("th",{style:{"text-align":"left"}},"合入到"),(0,n._)("th",{style:{"text-align":"left"}},"说明")])]),(0,n._)("tbody",null,[(0,n._)("tr",null,[(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"-"),(0,n._)("td",{style:{"text-align":"left"}},"-"),(0,n._)("td",{style:{"text-align":"left"}},"主分支")]),(0,n._)("tr",null,[(0,n._)("td",{style:{"text-align":"left"}},"release"),(0,n._)("td",{style:{"text-align":"left"}},"release/sprint标记"),(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"待发布的版本")]),(0,n._)("tr",null,[(0,n._)("td",{style:{"text-align":"left"}},"feature"),(0,n._)("td",{style:{"text-align":"left"}},"feature/功能点名称"),(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"release"),(0,n._)("td",{style:{"text-align":"left"}},"新功能分支")]),(0,n._)("tr",null,[(0,n._)("td",{style:{"text-align":"left"}},"hotfix"),(0,n._)("td",{style:{"text-align":"left"}},"hotfix/bug号"),(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"生产环境紧急bug修复")]),(0,n._)("tr",null,[(0,n._)("td",{style:{"text-align":"left"}},"tag"),(0,n._)("td",{style:{"text-align":"left"}},"vx.x.x"),(0,n._)("td",{style:{"text-align":"left"}},"master"),(0,n._)("td",{style:{"text-align":"left"}},"-"),(0,n._)("td",{style:{"text-align":"left"}},"master分支的标签")])])],-1),d=(0,n._)("blockquote",null,[(0,n._)("p",null,[(0,n.Uk)("注意： 若发布流程中使用 "),(0,n._)("code",null,"docker build -t <name>:<tag> ."),(0,n.Uk)("来创建镜像，并且tag的取值为此次发布的分支名称，则分支命名不可使用【release/sprint标记、feature/功能点名称】规则。 标签名称只支持"),(0,n._)("strong",null,"小写字母"),(0,n.Uk)("、"),(0,n._)("strong",null,"数字"),(0,n.Uk)("、"),(0,n._)("strong",null,"连字符"),(0,n.Uk)("、"),(0,n._)("strong",null,"下划线"),(0,n.Uk)("四种，因此建议将斜杠"),(0,n._)("code",null,"/"),(0,n.Uk)("改为下划线"),(0,n._)("code",null,"_"),(0,n.Uk)("进行连接。")])],-1),_=(0,n._)("p",null,"注释：",-1),c=(0,n.uE)("<li><strong>sprint标记</strong>：格式为 <code>sprint次数[-title]</code>，例如<code>sprint22-map</code>。若项目不采用敏捷管理方式，此字段可替代为预发布时间，例如<code>2019-05-20</code>，完整分支名 <code>release/2019-05-20</code>；</li><li><strong>功能点名称</strong>：格式为小写连字符 <code>-</code>，例如：用户详情 <code>feature/user-details</code>；</li>",2),o=(0,n._)("strong",null,"bug号",-1),h=(0,n.Uk)("：为修复对应的 "),g={href:"https://www.atlassian.com/software/jira",target:"_blank",rel:"noopener noreferrer"},k=(0,n.Uk)("Jira"),U=(0,n.Uk)(" Bug编号。"),f=(0,n._)("h3",{id:"说明",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#说明","aria-hidden":"true"},"#"),(0,n.Uk)(" 说明")],-1),b=(0,n._)("h4",{id:"master分支",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#master分支","aria-hidden":"true"},"#"),(0,n.Uk)(),(0,n._)("code",null,"master"),(0,n.Uk)("分支")],-1),m=(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("code",null,"master"),(0,n.Uk)("主分支是线上当前发布的版本，是稳定可用的版本")]),(0,n._)("li",null,"必须设置分支保护，并且由专人管理"),(0,n._)("li",null,[(0,n.Uk)("只有"),(0,n._)("code",null,"pull"),(0,n.Uk)("、"),(0,n._)("code",null,"merge"),(0,n.Uk)("权限，没有"),(0,n._)("code",null,"push"),(0,n.Uk)("权限")]),(0,n._)("li",null,[(0,n.Uk)("发布后需打上"),(0,n._)("code",null,"tag")])],-1),x=(0,n._)("h4",{id:"release分支",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#release分支","aria-hidden":"true"},"#"),(0,n.Uk)(),(0,n._)("code",null,"release"),(0,n.Uk)("分支")],-1),p=(0,n._)("ul",null,[(0,n._)("li",null,"主要作用是给当前版本提测以及修复bug使用"),(0,n._)("li",null,[(0,n.Uk)("在一次迭代开发完成后，将所有自测通过的功能分支代码合并"),(0,n._)("code",null,"release"),(0,n.Uk)("分支，并设置分支保护")]),(0,n._)("li",null,[(0,n.Uk)("只能"),(0,n._)("code",null,"merge"),(0,n.Uk)("，不能直接"),(0,n._)("code",null,"push")]),(0,n._)("li",null,[(0,n.Uk)("一旦封版，"),(0,n._)("code",null,"release"),(0,n.Uk)("分支必须冻结，不允许任何形式的代码改动")])],-1),v=(0,n._)("h4",{id:"feature分支",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#feature分支","aria-hidden":"true"},"#"),(0,n.Uk)(),(0,n._)("code",null,"feature"),(0,n.Uk)("分支")],-1),y=(0,n._)("ul",null,[(0,n._)("li",null,[(0,n._)("code",null,"feature"),(0,n.Uk)("分支作为完成某个特定功能的分支，从master拉取")]),(0,n._)("li",null,[(0,n._)("code",null,"feature"),(0,n.Uk)("分支的划分应综合业务和技术模块垂直切分，彼此互不影响")]),(0,n._)("li",null,[(0,n.Uk)("只有开发自测通过的"),(0,n._)("code",null,"feature"),(0,n.Uk)("分支可以合并"),(0,n._)("code",null,"release"),(0,n.Uk)("分支")]),(0,n._)("li",null,[(0,n.Uk)("项目发布生产环境后，需删除相应的"),(0,n._)("code",null,"feature"),(0,n.Uk)("分支")])],-1),w=(0,n._)("h4",{id:"hotfix分支",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#hotfix分支","aria-hidden":"true"},"#"),(0,n.Uk)(),(0,n._)("code",null,"hotfix"),(0,n.Uk)("分支")],-1),Y=(0,n._)("ul",null,[(0,n._)("li",null,"为了修复线上版本紧急的bug拉的分支"),(0,n._)("li",null,[(0,n.Uk)("从"),(0,n._)("code",null,"master"),(0,n.Uk)("拉取，测试后合并"),(0,n._)("code",null,"master"),(0,n.Uk)("发布")]),(0,n._)("li",null,[(0,n._)("code",null,"hotfix"),(0,n.Uk)("分支的命名应该与项目"),(0,n._)("code",null,"bug"),(0,n.Uk)("管理系统的"),(0,n._)("code",null,"bug号"),(0,n.Uk)("关联起来")])],-1),B=(0,n._)("h4",{id:"tag标签",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#tag标签","aria-hidden":"true"},"#"),(0,n.Uk)(),(0,n._)("code",null,"tag"),(0,n.Uk)("标签")],-1),D=(0,n._)("ul",null,[(0,n._)("li",null,"设立的目的是作为发布记录，同时便于回滚"),(0,n._)("li",null,[(0,n.Uk)("由"),(0,n._)("code",null,"版本号 + 描述信息"),(0,n.Uk)("组成")]),(0,n._)("li",null,"版本号为三位以‘.’分割的数字，从0.0.1开始，每一位依次向上叠加"),(0,n._)("li",null,"从前到后的三位数字分别为大版本迭代，一般迭代，紧急Bug修复"),(0,n._)("li",null,"当小数点前的版本数字加1时，小数点之后的所有数字归零")],-1),G=(0,n._)("h2",{id:"工作流",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#工作流","aria-hidden":"true"},"#"),(0,n.Uk)(" 工作流")],-1),M=(0,n._)("p",null,[(0,n._)("img",{src:a,alt:"git flow"})],-1),$=(0,n._)("h3",{id:"需求开发",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#需求开发","aria-hidden":"true"},"#"),(0,n.Uk)(" 需求开发")],-1),C=(0,n._)("ul",null,[(0,n._)("li",null,[(0,n.Uk)("将新需求/迭代拆分成不同的功能模块后，按模块从"),(0,n._)("code",null,"master"),(0,n.Uk)("新建功能分支"),(0,n._)("code",null,"feature/功能分支名")]),(0,n._)("li",null,"每天至少一次拉取、合并、提交操作，使代码分支与远程同步"),(0,n._)("li",null,[(0,n.Uk)("功能开发完毕，合并进相应的"),(0,n._)("code",null,"release"),(0,n.Uk)("分支")]),(0,n._)("li",null,[(0,n.Uk)("当有新迭代上线，"),(0,n._)("code",null,"master"),(0,n.Uk)("分支代码发生变化时，未上线的分支必须同步一次")])],-1),j=(0,n._)("h3",{id:"发布测试",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#发布测试","aria-hidden":"true"},"#"),(0,n.Uk)(" 发布测试")],-1),q=(0,n._)("ul",null,[(0,n._)("li",null,[(0,n.Uk)("从"),(0,n._)("code",null,"master"),(0,n.Uk)("主分支新建分支"),(0,n._)("code",null,"release/YYYY-MM-DD")]),(0,n._)("li",null,[(0,n.Uk)("在项目管理工具相应的"),(0,n._)("strong",null,"发布版本管理"),(0,n.Uk)("模块中，创建相应的版本信息（记录版本号和描述），作为分支记录和发版依据")]),(0,n._)("li",null,[(0,n.Uk)("更改项目框架代码中的"),(0,n._)("code",null,"version"),(0,n.Uk)("字段为当前版本号。例如前端改动"),(0,n._)("code",null,"package.json"),(0,n.Uk)("文件中的"),(0,n._)("code",null,"version"),(0,n.Uk)("字段")]),(0,n._)("li",null,[(0,n.Uk)("将开发自测通过的功能分支合并到"),(0,n._)("code",null,"release/YYYY-MM-DD"),(0,n.Uk)("分支，由运维人员发布测试")]),(0,n._)("li",null,[(0,n.Uk)("当开发人员接收到"),(0,n._)("code",null,"Bug"),(0,n.Uk)("，先在其相应功能分支修改，自测，最后合并到"),(0,n._)("code",null,"release"),(0,n.Uk)("分支，发布后通知测试验证")])],-1),z=(0,n._)("h3",{id:"生产发布",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#生产发布","aria-hidden":"true"},"#"),(0,n.Uk)(" 生产发布")],-1),E=(0,n._)("ul",null,[(0,n._)("li",null,[(0,n.Uk)("生产环境由运维发布，发布对象为本次迭代的"),(0,n._)("code",null,"release"),(0,n.Uk)("分支")]),(0,n._)("li",null,[(0,n.Uk)("项目发布第二天，项目管理员将"),(0,n._)("code",null,"release"),(0,n.Uk)("分支合并到"),(0,n._)("code",null,"master"),(0,n.Uk)("分支")]),(0,n._)("li",null,[(0,n.Uk)("在"),(0,n._)("code",null,"master"),(0,n.Uk)("分支上打上"),(0,n._)("code",null,"tag"),(0,n.Uk)("，作为发布记录，同时便于回滚")])],-1),H=(0,n._)("h3",{id:"生产环境紧急bug修复",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#生产环境紧急bug修复","aria-hidden":"true"},"#"),(0,n.Uk)(" 生产环境紧急"),(0,n._)("code",null,"Bug"),(0,n.Uk)("修复")],-1),J=(0,n._)("ul",null,[(0,n._)("li",null,[(0,n.Uk)("从master新建分支"),(0,n._)("code",null,"hotfix/bug号"),(0,n.Uk)("进行bug修复")]),(0,n._)("li",null,[(0,n.Uk)("修复完毕并测试通过后，将分支"),(0,n._)("code",null,"hotfix/bug号"),(0,n.Uk)("合并"),(0,n._)("code",null,"master"),(0,n.Uk)("分支发布")]),(0,n._)("li",null,[(0,n.Uk)("在"),(0,n._)("code",null,"master"),(0,n.Uk)("分支上打上"),(0,n._)("code",null,"tag")])],-1),L=(0,n._)("h2",{id:"附-git标签操作",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#附-git标签操作","aria-hidden":"true"},"#"),(0,n.Uk)(" 附：Git标签操作")],-1),N=(0,n._)("h3",{id:"打标签并推送",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#打标签并推送","aria-hidden":"true"},"#"),(0,n.Uk)(" 打标签并推送")],-1),O=(0,n._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,n._)("pre",{class:"language-bash"},[(0,n._)("code",null,[(0,n._)("span",{class:"token function"},"git"),(0,n.Uk)(" tag -a v0.1.0 -m "),(0,n._)("span",{class:"token string"},"'初始版本'"),(0,n.Uk)("\n"),(0,n._)("span",{class:"token function"},"git"),(0,n.Uk)(" push origin --tags\n")])]),(0,n._)("div",{class:"line-numbers"},[(0,n._)("span",{class:"line-number"},"1"),(0,n._)("br"),(0,n._)("span",{class:"line-number"},"2"),(0,n._)("br")])],-1),P=(0,n._)("h3",{id:"查看所有tag信息",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#查看所有tag信息","aria-hidden":"true"},"#"),(0,n.Uk)(" 查看所有tag信息")],-1),R=(0,n._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,n._)("pre",{class:"language-bash"},[(0,n._)("code",null,[(0,n._)("span",{class:"token function"},"git"),(0,n.Uk)(" tag -n\n")])]),(0,n._)("div",{class:"line-numbers"},[(0,n._)("span",{class:"line-number"},"1"),(0,n._)("br")])],-1),T=(0,n._)("h3",{id:"补打标签",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#补打标签","aria-hidden":"true"},"#"),(0,n.Uk)(" 补打标签")],-1),W=(0,n._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,n._)("pre",{class:"language-bash"},[(0,n._)("code",null,[(0,n._)("span",{class:"token comment"},"# 给指定commit打标签"),(0,n.Uk)("\n$ "),(0,n._)("span",{class:"token function"},"git"),(0,n.Uk)(" tag -a v0.1.0 49e0cd2 -m "),(0,n._)("span",{class:"token string"},"'初始版本'"),(0,n.Uk)("\n")])]),(0,n._)("div",{class:"line-numbers"},[(0,n._)("span",{class:"line-number"},"1"),(0,n._)("br"),(0,n._)("span",{class:"line-number"},"2"),(0,n._)("br")])],-1),A=(0,n._)("h3",{id:"打错标签",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#打错标签","aria-hidden":"true"},"#"),(0,n.Uk)(" 打错标签")],-1),F=(0,n._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,n._)("pre",{class:"language-bash"},[(0,n._)("code",null,[(0,n._)("span",{class:"token comment"},"# 本地删除"),(0,n.Uk)("\n$ "),(0,n._)("span",{class:"token function"},"git"),(0,n.Uk)(" tag -d v0.1.0\n")])]),(0,n._)("div",{class:"line-numbers"},[(0,n._)("span",{class:"line-number"},"1"),(0,n._)("br"),(0,n._)("span",{class:"line-number"},"2"),(0,n._)("br")])],-1),I=(0,n._)("h3",{id:"删除标签",tabindex:"-1"},[(0,n._)("a",{class:"header-anchor",href:"#删除标签","aria-hidden":"true"},"#"),(0,n.Uk)(" 删除标签")],-1),K=(0,n._)("div",{class:"language-bash ext-sh line-numbers-mode"},[(0,n._)("pre",{class:"language-bash"},[(0,n._)("code",null,[(0,n._)("span",{class:"token comment"},"# 远程删除"),(0,n.Uk)("\n$ "),(0,n._)("span",{class:"token function"},"git"),(0,n.Uk)(" push origin :refs/tags/v0.1.0\n$ "),(0,n._)("span",{class:"token function"},"git"),(0,n.Uk)(" push origin --delete tag v0.1.0\n")])]),(0,n._)("div",{class:"line-numbers"},[(0,n._)("span",{class:"line-number"},"1"),(0,n._)("br"),(0,n._)("span",{class:"line-number"},"2"),(0,n._)("br"),(0,n._)("span",{class:"line-number"},"3"),(0,n._)("br")])],-1),Q={render:function(l,e){const t=(0,n.up)("OutboundLink");return(0,n.wg)(),(0,n.iD)(n.HY,null,[s,i,r,u,d,_,(0,n._)("ul",null,[c,(0,n._)("li",null,[o,h,(0,n._)("a",g,[k,(0,n.Wm)(t)]),U])]),f,b,m,x,p,v,y,w,Y,B,D,G,M,$,C,j,q,z,E,H,J,L,N,O,P,R,T,W,A,F,I,K],64)}}},3080:(l,e,t)=>{l.exports=t.p+"assets/img/git-workflow.bd24a7e0.png"}}]);